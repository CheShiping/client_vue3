# æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ - ç»ˆæä¿®å¤æ–¹æ¡ˆ

## âœ… æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

æˆ‘å·²ç»å®ç°äº†ä¸€ä¸ª**æ™ºèƒ½ä¿®å¤æ–¹æ¡ˆ**ï¼Œæ— éœ€é‡æ–°ç™»å½•å³å¯å·¥ä½œï¼

### ğŸ”§ ä¿®å¤å†…å®¹

**å‰ç«¯è‡ªåŠ¨è·å– student_id**ï¼š
- å¦‚æœ localStorage ä¸­æ²¡æœ‰ `student_id`
- å‰ç«¯ä¼šè‡ªåŠ¨è°ƒç”¨ API è·å–å­¦ç”Ÿä¿¡æ¯
- è‡ªåŠ¨æ›´æ–° localStorage
- ç„¶åç»§ç»­ä¸Šä¼ æ–‡ä»¶

### ğŸ¯ ç°åœ¨å¯ä»¥ç›´æ¥æµ‹è¯•

**æ— éœ€é‡æ–°ç™»å½•ï¼**ç›´æ¥æµ‹è¯•å³å¯ï¼š

1. **è®¿é—®ç³»ç»Ÿ**
   ```
   http://localhost:3003
   ```

2. **å¦‚æœå·²ç™»å½•å­¦ç”Ÿè´¦å·**
   - ç›´æ¥è¿›å…¥"ç­”è¾©ææ–™ç®¡ç†"
   - ç‚¹å‡»"ä¸Šä¼ ææ–™"
   - é€‰æ‹©æ–‡ä»¶å¹¶ä¸Šä¼ 

3. **å¦‚æœæœªç™»å½•**
   - ä½¿ç”¨å­¦ç”Ÿè´¦å·ç™»å½•ï¼š
     - ç”¨æˆ·åï¼š`student1`
     - å¯†ç ï¼š`123456`
   - è¿›å…¥"ç­”è¾©ææ–™ç®¡ç†"
   - ä¸Šä¼ æ–‡ä»¶

## ğŸ” å·¥ä½œåŸç†

### æ™ºèƒ½è·å– student_id

```javascript
// 1. å°è¯•ä» localStorage è·å–
let studentId = userInfo.student_id

// 2. å¦‚æœæ²¡æœ‰ï¼Œè‡ªåŠ¨è°ƒç”¨ API è·å–
if (!studentId && userInfo.user_id) {
  const response = await axios.get(`/api/student/user/${userInfo.user_id}`)
  studentId = response.data.result.student_id
  
  // 3. æ›´æ–° localStorageï¼Œä¸‹æ¬¡å°±ä¸ç”¨å†è·å–äº†
  userInfo.student_id = studentId
  localStorage.setItem('userInfo', JSON.stringify(userInfo))
}

// 4. ä½¿ç”¨ student_id ä¸Šä¼ æ–‡ä»¶
formData.append('student_id', studentId)
```

## ğŸ“‹ æµ‹è¯•æ­¥éª¤

### æ–¹æ¡ˆ Aï¼šç›´æ¥æµ‹è¯•ï¼ˆæ¨èï¼‰

1. è®¿é—® http://localhost:3003
2. ç™»å½•å­¦ç”Ÿè´¦å·ï¼ˆstudent1 / 123456ï¼‰
3. è¿›å…¥"ç­”è¾©ææ–™ç®¡ç†"
4. ç‚¹å‡»"ä¸Šä¼ ææ–™"
5. é€‰æ‹©ææ–™ç±»å‹
6. é€‰æ‹©æ–‡ä»¶
7. ç‚¹å‡»"ç¡®å®šä¸Šä¼ "

### æ–¹æ¡ˆ Bï¼šç¡®ä¿æ•°æ®åº“æœ‰å­¦ç”Ÿæ•°æ®

å¦‚æœä¸Šä¼ ä»ç„¶å¤±è´¥ï¼Œå¯èƒ½æ˜¯æ•°æ®åº“ä¸­æ²¡æœ‰å­¦ç”Ÿæ•°æ®ã€‚æ‰§è¡Œä»¥ä¸‹ SQLï¼š

```sql
USE defense_management_system;

-- æ’å…¥æµ‹è¯•ç”¨æˆ·
INSERT IGNORE INTO users (username, password, nickname, phone, email, user_group, state) 
VALUES ('student1', '123456', 'æµ‹è¯•å­¦ç”Ÿ1', '13800000001', 'student1@test.com', 'student', 1);

-- è·å–ç”¨æˆ·ID
SET @user_id = (SELECT user_id FROM users WHERE username = 'student1');

-- æ’å…¥å­¦ç”Ÿä¿¡æ¯
INSERT IGNORE INTO students (user_id, student_name, student_no, student_gender, student_age, class_name, major_name, grade, state)
VALUES (@user_id, 'æµ‹è¯•å­¦ç”Ÿ1', 'S2024001', 'ç”·', '22', 'è®¡ç®—æœº2024-1ç­', 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯', '2024', 1);

-- éªŒè¯
SELECT u.user_id, u.username, s.student_id, s.student_name
FROM users u
LEFT JOIN students s ON u.user_id = s.user_id
WHERE u.username = 'student1';
```

## ğŸ“ æµ‹è¯•è´¦å·

### å­¦ç”Ÿè´¦å·
- student1 / 123456
- student2 / 123456
- student3 / 123456

### æ•™å¸ˆè´¦å·
- teacher1 / 123456
- teacher2 / 123456

### ç®¡ç†å‘˜è´¦å·
- admin / 123456

## ğŸ“ æ”¯æŒçš„æ–‡ä»¶

- **æ–‡ä»¶ç±»å‹**ï¼šPDFã€DOCã€DOCXã€PPTã€PPTXã€ZIPã€RAR
- **æœ€å¤§å¤§å°**ï¼š50MB
- **ææ–™ç±»å‹**ï¼š
  - ç­”è¾©PPT
  - è®ºæ–‡ç»ˆç¨¿
  - å¼€é¢˜æŠ¥å‘Š
  - ä¸­æœŸæŠ¥å‘Š
  - å¤–æ–‡ç¿»è¯‘
  - å…¶ä»–ææ–™

## ğŸ” éªŒè¯ä¿®å¤æˆåŠŸ

### æ£€æŸ¥ student_id æ˜¯å¦è·å–æˆåŠŸ

ä¸Šä¼ æ–‡ä»¶åï¼ŒæŒ‰ `F12` æ‰“å¼€æ§åˆ¶å°ï¼Œè¾“å…¥ï¼š

```javascript
JSON.parse(localStorage.getItem('userInfo'))
```

åº”è¯¥èƒ½çœ‹åˆ° `student_id` å­—æ®µï¼

### æ£€æŸ¥ä¸Šä¼ æ˜¯å¦æˆåŠŸ

1. ä¸Šä¼ ååº”è¯¥æ˜¾ç¤º"ä¸Šä¼ æˆåŠŸ"
2. æ–‡ä»¶åº”è¯¥å‡ºç°åœ¨ææ–™åˆ—è¡¨ä¸­
3. å¯ä»¥ä¸‹è½½åˆšä¸Šä¼ çš„æ–‡ä»¶
4. å¯ä»¥åˆ é™¤æ–‡ä»¶

## âš ï¸ å¦‚æœä»ç„¶å¤±è´¥

### 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

æŒ‰ `F12` æ‰“å¼€æ§åˆ¶å°ï¼ŒæŸ¥çœ‹ï¼š
- Console æ ‡ç­¾ï¼šæ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- Network æ ‡ç­¾ï¼šæŸ¥çœ‹ä¸Šä¼ è¯·æ±‚çš„è¯¦æƒ…

### 2. æ£€æŸ¥åç«¯æ—¥å¿—

åç«¯ä¼šè¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼ŒåŒ…æ‹¬ï¼š
- æ¥æ”¶åˆ°çš„ student_id
- æ–‡ä»¶å
- é”™è¯¯ä¿¡æ¯

### 3. ç¡®è®¤æ•°æ®åº“ä¸­æœ‰å­¦ç”Ÿæ•°æ®

æ‰§è¡Œ SQL æŸ¥è¯¢ï¼š

```sql
SELECT u.user_id, u.username, s.student_id, s.student_name
FROM users u
LEFT JOIN students s ON u.user_id = s.user_id
WHERE u.username = 'student1';
```

åº”è¯¥èƒ½çœ‹åˆ° `student_id` ä¸ä¸ºç©ºã€‚

### 4. æä¾›ä»¥ä¸‹ä¿¡æ¯

å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œè¯·æä¾›ï¼š
- æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
- åç«¯æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
- ä¸Šè¿° SQL æŸ¥è¯¢çš„ç»“æœ

## ğŸ‰ ä¼˜åŠ¿

è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼š
- âœ… **æ— éœ€é‡æ–°ç™»å½•** - è‡ªåŠ¨è·å– student_id
- âœ… **è‡ªåŠ¨ä¿®å¤** - å¦‚æœæ²¡æœ‰ student_id ä¼šè‡ªåŠ¨è·å–
- âœ… **ç¼“å­˜ä¼˜åŒ–** - è·å–ä¸€æ¬¡åä¿å­˜åˆ° localStorage
- âœ… **å‘åå…¼å®¹** - å¦‚æœå·²æœ‰ student_id ç›´æ¥ä½¿ç”¨

## ğŸ“‚ ä¿®æ”¹çš„æ–‡ä»¶

- `src/views/defense-material/list.vue` - æ·»åŠ è‡ªåŠ¨è·å– student_id çš„é€»è¾‘
- `backend/index.js` - ç™»å½• API è¿”å› student_idï¼ˆå·²å®Œæˆï¼‰

ç°åœ¨è¯·ç›´æ¥æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼
