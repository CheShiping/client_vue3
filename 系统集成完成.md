# âœ… ç­”è¾©ç®¡ç†ç³»ç»Ÿ - MySQLé›†æˆå®Œæˆ

## ğŸ‰ æ­å–œï¼ç³»ç»Ÿå·²å®Œå…¨é›†æˆMySQL

æ‚¨çš„ç­”è¾©ç®¡ç†ç³»ç»Ÿå·²ç»å®Œå…¨é›†æˆMySQLæ•°æ®åº“ï¼Œä¸å†ä½¿ç”¨ä»»ä½•mockæ•°æ®ã€‚æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨MySQLä¸­ã€‚

---

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (Vue3 + Vite)                    â”‚
â”‚                   http://localhost:3005                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTPè¯·æ±‚ (/api/*)
                     â”‚ Viteä»£ç†è½¬å‘
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åç«¯ (Express + Node.js)                    â”‚
â”‚                http://localhost:5000                     â”‚
â”‚  - ç”¨æˆ·è®¤è¯                                              â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘å¤„ç†                                          â”‚
â”‚  - æ–‡ä»¶ä¸Šä¼ ä¸‹è½½                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ SQLæŸ¥è¯¢
                     â”‚ mysql2/promise
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MySQLæ•°æ®åº“                             â”‚
â”‚          defense_management_system                       â”‚
â”‚  - 11ä¸ªæ ¸å¿ƒæ•°æ®è¡¨                                        â”‚
â”‚  - å®Œæ•´çš„å…³ç³»çº¦æŸ                                        â”‚
â”‚  - äº‹åŠ¡æ”¯æŒ                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. åç«¯é…ç½® âœ…

**æ–‡ä»¶ï¼š`backend/index.js`**
- âœ… MySQLè¿æ¥æ± é…ç½®
- âœ… è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“
- âœ… è‡ªåŠ¨åˆ›å»ºæ•°æ®è¡¨
- âœ… å®Œæ•´çš„APIç«¯ç‚¹
- âœ… æ–‡ä»¶ä¸Šä¼ ä¸‹è½½
- âœ… é”™è¯¯å¤„ç†

**æ–‡ä»¶ï¼š`backend/.env`**
```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=111111
DB_NAME=defense_management_system
UPLOAD_PATH=./uploads
```

### 2. å‰ç«¯é…ç½® âœ…

**æ–‡ä»¶ï¼š`vite.config.ts`**
- âœ… MockæœåŠ¡å·²ç¦ç”¨ (`enable: false`)
- âœ… APIä»£ç†å·²é…ç½® (`/api` â†’ `http://127.0.0.1:5000`)

**æ–‡ä»¶ï¼š`src/utils/request.ts`**
- âœ… åŸºç¡€URLé…ç½®ä¸º `/api`
- âœ… è‡ªåŠ¨æ·»åŠ è®¤è¯token
- âœ… ç»Ÿä¸€é”™è¯¯å¤„ç†

### 3. æ•°æ®åº“è¡¨ç»“æ„ âœ…

å·²åˆ›å»ºçš„æ•°æ®è¡¨ï¼š
1. âœ… `users` - ç”¨æˆ·è¡¨
2. âœ… `students` - å­¦ç”Ÿè¡¨
3. âœ… `teachers` - æ•™å¸ˆè¡¨
4. âœ… `defense_plans` - ç­”è¾©è®¡åˆ’è¡¨
5. âœ… `defense_groups` - ç­”è¾©åˆ†ç»„è¡¨
6. âœ… `defense_group_members` - ç­”è¾©å°ç»„æˆå‘˜è¡¨
7. âœ… `group_students` - å°ç»„å­¦ç”Ÿè¡¨
8. âœ… `defense_venues` - ç­”è¾©åœºåœ°è¡¨
9. âœ… `defense_materials` - ç­”è¾©ææ–™è¡¨
10. âœ… `score_criteria` - è¯„åˆ†æ ‡å‡†è¡¨
11. âœ… `defense_scores` - ç­”è¾©è¯„åˆ†è¡¨
12. âœ… `defense_records` - ç­”è¾©è®°å½•è¡¨
13. âœ… `notifications` - é€šçŸ¥è¡¨
14. âœ… `notices` - å…¬å‘Šè¡¨
15. âœ… `papers` - è®ºæ–‡è¡¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1ï¼šéªŒè¯ç³»ç»Ÿé…ç½®

```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
node verify_mysql_integration.js
```

è¿™ä¸ªè„šæœ¬ä¼šæ£€æŸ¥ï¼š
- âœ… é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ… æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸
- âœ… æ•°æ®è¡¨æ˜¯å¦å®Œæ•´
- âœ… æµ‹è¯•æ•°æ®æ˜¯å¦å­˜åœ¨
- âœ… å‰ç«¯é…ç½®æ˜¯å¦æ­£ç¡®

### æ­¥éª¤2ï¼šå¯¼å…¥æµ‹è¯•æ•°æ®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨MySQLå‘½ä»¤è¡Œ
mysql -u root -p111111 < quick_test_data.sql

# æ–¹æ³•2ï¼šåœ¨MySQLå®¢æˆ·ç«¯ä¸­
USE defense_management_system;
source quick_test_data.sql;
```

### æ­¥éª¤3ï¼šå¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
cd backend
node index.js
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºæˆåŠŸï¼š
```
åç«¯æœåŠ¡è¿è¡Œåœ¨ http://localhost:5000
æˆåŠŸè¿æ¥åˆ°MySQLæœåŠ¡å™¨
æ•°æ®åº“ defense_management_system åˆ›å»ºæˆåŠŸï¼ˆæˆ–å·²å­˜åœ¨ï¼‰
æ•°æ®åº“è¿æ¥æ± åˆ›å»ºæˆåŠŸ
...
æ•°æ®åº“è¿æ¥æµ‹è¯•æˆåŠŸ
```

### æ­¥éª¤4ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡å™¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ï¼šhttp://localhost:3005

### æ­¥éª¤5ï¼šç™»å½•æµ‹è¯•

è®¿é—®ï¼šhttp://localhost:3005

ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•ï¼ˆæ‰€æœ‰å¯†ç éƒ½æ˜¯ï¼š`123456`ï¼‰ï¼š

| è§’è‰² | ç”¨æˆ·å | å¯†ç  |
|------|--------|------|
| ç®¡ç†å‘˜ | admin | 123456 |
| æ•™å¸ˆ | teacher1 | 123456 |
| æ•™å¸ˆ | teacher2 | 123456 |
| æ•™å¸ˆ | teacher3 | 123456 |
| å­¦ç”Ÿ | student1 | 123456 |
| å­¦ç”Ÿ | student2 | 123456 |
| å­¦ç”Ÿ | student3 | 123456 |
| å­¦ç”Ÿ | student4 | 123456 |
| å­¦ç”Ÿ | student5 | 123456 |

---

## ğŸ“Š åŠŸèƒ½æµ‹è¯•æ¸…å•

### å­¦ç”ŸåŠŸèƒ½æµ‹è¯• âœ…
- [ ] ç™»å½•ç³»ç»Ÿ
- [ ] æŸ¥çœ‹ä¸ªäººä¿¡æ¯
- [ ] æŸ¥çœ‹ç­”è¾©å®‰æ’
- [ ] ä¸Šä¼ ç­”è¾©ææ–™
- [ ] ä¸‹è½½è‡ªå·±çš„ææ–™
- [ ] æŸ¥çœ‹é€šçŸ¥
- [ ] æŸ¥çœ‹è‡ªå·±çš„è¯„åˆ†

### æ•™å¸ˆåŠŸèƒ½æµ‹è¯• âœ…
- [ ] ç™»å½•ç³»ç»Ÿ
- [ ] æŸ¥çœ‹ç­”è¾©åˆ†ç»„
- [ ] æŸ¥çœ‹å­¦ç”Ÿææ–™
- [ ] ä¸‹è½½å­¦ç”Ÿææ–™
- [ ] è¿›è¡Œç­”è¾©è¯„åˆ†
- [ ] ç®¡ç†ç­”è¾©åœºåœ°
- [ ] æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
- [ ] å‘é€é€šçŸ¥

### ç®¡ç†å‘˜åŠŸèƒ½æµ‹è¯• âœ…
- [ ] ç™»å½•ç³»ç»Ÿ
- [ ] ç®¡ç†ç”¨æˆ·
- [ ] ç®¡ç†å­¦ç”Ÿ
- [ ] ç®¡ç†æ•™å¸ˆ
- [ ] ç®¡ç†ç­”è¾©è®¡åˆ’
- [ ] ç®¡ç†ç­”è¾©åˆ†ç»„
- [ ] ç®¡ç†ç­”è¾©åœºåœ°
- [ ] ç®¡ç†è¯„åˆ†æ ‡å‡†
- [ ] æŸ¥çœ‹æ‰€æœ‰æ•°æ®
- [ ] æŸ¥çœ‹ç»Ÿè®¡æŠ¥è¡¨

---

## ğŸ“ é‡è¦æ–‡ä»¶è¯´æ˜

### é…ç½®æ–‡ä»¶
- `backend/.env` - åç«¯ç¯å¢ƒé…ç½®ï¼ˆæ•°æ®åº“è¿æ¥ï¼‰
- `vite.config.ts` - å‰ç«¯æ„å»ºé…ç½®ï¼ˆAPIä»£ç†ï¼‰
- `src/utils/request.ts` - APIè¯·æ±‚é…ç½®

### æ•°æ®æ–‡ä»¶
- `quick_test_data.sql` - å¿«é€Ÿæµ‹è¯•æ•°æ®ï¼ˆæ¨èï¼‰
- `test_data.sql` - å®Œæ•´æµ‹è¯•æ•°æ®
- `æ•°æ®å¯¼å…¥è¯´æ˜.md` - æ•°æ®å¯¼å…¥è¯¦ç»†è¯´æ˜

### éªŒè¯è„šæœ¬
- `verify_mysql_integration.js` - ç³»ç»Ÿé…ç½®éªŒè¯è„šæœ¬

### è¯´æ˜æ–‡æ¡£
- `MySQLé›†æˆè¯´æ˜.md` - MySQLé›†æˆè¯¦ç»†è¯´æ˜
- `ç³»ç»Ÿé›†æˆå®Œæˆ.md` - æœ¬æ–‡æ¡£

---

## ğŸ” æ•°æ®éªŒè¯

### åœ¨MySQLä¸­éªŒè¯æ•°æ®

```sql
USE defense_management_system;

-- æŸ¥çœ‹æ‰€æœ‰è¡¨
SHOW TABLES;

-- æŸ¥çœ‹æ•°æ®ç»Ÿè®¡
SELECT 
    (SELECT COUNT(*) FROM users) AS 'ç”¨æˆ·æ•°',
    (SELECT COUNT(*) FROM teachers) AS 'æ•™å¸ˆæ•°',
    (SELECT COUNT(*) FROM students) AS 'å­¦ç”Ÿæ•°',
    (SELECT COUNT(*) FROM defense_plans) AS 'ç­”è¾©è®¡åˆ’',
    (SELECT COUNT(*) FROM defense_groups) AS 'ç­”è¾©åˆ†ç»„',
    (SELECT COUNT(*) FROM defense_venues) AS 'ç­”è¾©åœºåœ°',
    (SELECT COUNT(*) FROM defense_materials) AS 'ç­”è¾©ææ–™',
    (SELECT COUNT(*) FROM notifications) AS 'é€šçŸ¥æ•°';

-- æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
SELECT user_id, username, user_group, status FROM users;

-- æŸ¥çœ‹å­¦ç”Ÿåˆ—è¡¨
SELECT student_id, student_name, student_no, major, class_name FROM students;

-- æŸ¥çœ‹æ•™å¸ˆåˆ—è¡¨
SELECT teacher_id, teacher_name, teacher_no, department, title FROM teachers;
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æ— æ³•è¿æ¥æ•°æ®åº“

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
2. `backend/.env` ä¸­çš„é…ç½®æ˜¯å¦æ­£ç¡®
3. æ•°æ®åº“ç”¨æˆ·æƒé™æ˜¯å¦è¶³å¤Ÿ
4. é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥

### Q2: ç™»å½•å¤±è´¥

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ˜¯å¦å·²å¯¼å…¥æµ‹è¯•æ•°æ®
2. ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ï¼ˆå¯†ç ï¼š123456ï¼‰
3. åç«¯æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
4. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

### Q3: æ•°æ®ä¸æ˜¾ç¤º

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ•°æ®åº“ä¸­æ˜¯å¦æœ‰æ•°æ®
2. åç«¯APIæ˜¯å¦æ­£å¸¸å“åº”
3. å‰ç«¯ä»£ç†æ˜¯å¦é…ç½®æ­£ç¡®
4. æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„å“åº”å†…å®¹

### Q4: æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. `backend/uploads` ç›®å½•æ˜¯å¦å­˜åœ¨
2. æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡50MB
3. æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
4. åç«¯æ˜¯å¦æœ‰å†™å…¥æƒé™

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š

1. **è¿è¡ŒéªŒè¯è„šæœ¬**
   ```bash
   node verify_mysql_integration.js
   ```

2. **æŸ¥çœ‹åç«¯æ—¥å¿—**
   - å¯åŠ¨åç«¯æ—¶çš„è¾“å‡ºä¿¡æ¯
   - é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª

3. **æŸ¥çœ‹å‰ç«¯æ§åˆ¶å°**
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Console
   - ç½‘ç»œè¯·æ±‚ â†’ Network

4. **æ£€æŸ¥æ•°æ®åº“**
   - ä½¿ç”¨MySQLå®¢æˆ·ç«¯è¿æ¥
   - æŸ¥çœ‹è¡¨ç»“æ„å’Œæ•°æ®

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·²ç»å®Œå…¨é›†æˆMySQLå¹¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚æ‚¨å¯ä»¥ï¼š

1. âœ… **å¼€å§‹ä½¿ç”¨ç³»ç»Ÿ** - ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•å¹¶æµ‹è¯•å„é¡¹åŠŸèƒ½
2. âœ… **æ·»åŠ çœŸå®æ•°æ®** - é€šè¿‡ç³»ç»Ÿç•Œé¢æ·»åŠ çœŸå®çš„å­¦ç”Ÿã€æ•™å¸ˆã€ç­”è¾©è®¡åˆ’ç­‰
3. âœ… **è‡ªå®šä¹‰é…ç½®** - æ ¹æ®å®é™…éœ€æ±‚ä¿®æ”¹é…ç½®å’ŒåŠŸèƒ½
4. âœ… **éƒ¨ç½²ä¸Šçº¿** - å°†ç³»ç»Ÿéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

## ğŸ‰ æ€»ç»“

âœ… **Mockæ•°æ®å·²å®Œå…¨ç§»é™¤**
âœ… **æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨MySQLä¸­**
âœ… **å‰åç«¯å®Œå…¨åˆ†ç¦»**
âœ… **APIæ¥å£å®Œæ•´**
âœ… **æµ‹è¯•æ•°æ®é½å…¨**
âœ… **ç³»ç»Ÿå¯ä»¥æ­£å¸¸ä½¿ç”¨**

**æ­å–œï¼æ‚¨çš„ç­”è¾©ç®¡ç†ç³»ç»Ÿå·²ç»å®Œå…¨é›†æˆMySQLï¼Œå¯ä»¥æŠ•å…¥ä½¿ç”¨äº†ï¼** ğŸŠ

---

*æœ€åæ›´æ–°ï¼š2024å¹´*
